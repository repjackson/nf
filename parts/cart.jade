template(name='carts')
    .ui.stackable.padded.grid
        .four.wide.column.scrolling
            .ui.header
                i.cart.icon
                |#{cart_total}
                |carts
            .ui.circular.icon.button.add_cart
                i.large.plus.icon
        .twelve.wide.column
            unless subs_ready
                i.big.loading.refresh.icon
            .scrolling
                if carts.count
                    .ui.four.doubling.cards
                        each carts
                            +cart_card
                else 
                    .ui.center.aligned.basic.segment 
                        i.money.big.grey.loading.icon
                                
                     
                                
template(name='cart_card')
    a.card(href="/cart/#{_id}")
        .content
            .ui.header #{title} #{when}

template(name='checkout')
    with current_doc
        .ui.stackable.padded.grid
            .row
                .three.wide.column 
                    .ui.header checkout
                    +print_this
                .nine.wide.column
                    .ui.large.list
                        each cart_items
                            .item
                                .content
                                    .header
                                        .ui.inline.header #{product_title} 
                                    .description
                                        img.ui.small.inline.image(src="{{c.url product_image_id width=400 height=400 gravity='face' crop='fill'}}")
                                        i.large.red.circular.icon.remove_item
                                        .ui.circular.icon.button.increment
                                            i.large.plus.icon
                                        .ui.inline.header
                                            |#{amount}
                                        .ui.circular.icon.button.decrement
                                            i.large.minus.icon
                .four.wide.column
                    .ui.header 
                        |$#{subtotal}
                    .ui.header #{item_count_total} total items
                    .ui.fluid.big.green.button.complete
                        |complete order
                
template(name='cart_view')
    with current_doc
        .ui.stackable.padded.grid
            .row
                .four.wide.column 
                    if in_dev 
                        a.ui.icon.circular.button(href="/cart/#{_id}/edit")
                            i.pencil.large.icon
                        +print_this
                .eight.wide.column
                    .ui.basic.segment
                        h1.ui.header #{product_title} 
                
                
template(name='cart_edit')
    with current_doc
        .ui.stackable.padded.grid
            .row
                .four.wide.column
                    .ui.header 
                        small editing cart
                        strong #{title}
                    a.ui.big.icon.green.button(href="/#{model}/#{_id}" title='save')
                        i.checkmark.big.icon
                    +remove_button