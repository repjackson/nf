template(name='questions')
    .ui.stackable.padded.grid
        .four.wide.column.scrolling
            .ui.header
                i.tablet.icon
                |#{question_total}
                |question orders
            .ui.circular.icon.button.add_question
                i.large.plus.icon
        .twelve.wide.column
            i.sort.icon
            .ui.compact.icon.button.set_sort_direction(title='toggle sort direction')
                if sorting_up
                    i.sort.amount.down.icon
                else
                    i.sort.amount.up.icon
            +set_limit num=10
            +set_limit num=50
            div
            unless subs_ready
                i.big.loading.refresh.icon
            .scrolling
                if question_cards.count
                    .ui.four.doubling.cards
                        each question_cards
                            +question_card
                else 
                    .ui.center.aligned.basic.segment 
                        i.money.big.grey.loading.icon
                                
                       
template(name='set_limit')
    .ui.button #{num}
                       
                            
template(name='question_card')
    .card
        .content
            // .item Store_ID: #{Store_ID}
            // .item Charge_ID: #{Charge_ID}
            // .item Order_ID: #{Order_ID}
            // .item Ean_Code: #{Ean_Code}
            with related_question
                img.ui.inline.image(src="{{c.url image_id width=400 height=400 gravity='face' crop='fill'}}")
                .ui.inline.header 
                    |#{title}
            a.item.goto_question
                | #{_question}
            // .item Retailer_question_ID: #{Retailer_question_ID}
            .ui.inline.header(title='original price') $#{Original_Price}
            a(href=Ean_Code target='_window')
                i.wikipedia.link.icon
            .ui.label(title='quantity') #{Qty} qty
            .ui.label Discounted_Line_Amount: #{Discounted_Line_Amount}
            if Promo_Code
                .ui.label Promo_Code: #{Promo_Code}
            .ui.label Vat_Rate: #{Vat_Rate}
            // .ui.label Txn_Timestamp: #{Txn_Timestamp}
            // .ui.label meta info
            .ui.label(title='_converted_date') #{_converted_date}
            // .ui.label(title='month') #{_month}
            // .ui.label day: #{day}
            // .ui.label _weekdaynum: #{_weekdaynum}
            // .ui.label week #{_week_number}
            .ui.label(title='_weekday') #{_weekday}
            if in_dev 
                +print_this
                .ui.icon.button.calc
                    i.refresh.icon


template(name='question_view')
    with current_doc
        .ui.stackable.padded.grid
            .row
                .four.wide.column 
                    a.ui.compact.circular.basic.button.fly_left(href="/questions")
                        i.left.chevron.icon
                        +i name='food' cl='ui inline image'
                        // |questions
                    img.ui.fluid.rounded.image(src=images.full)
                    .ui.small.grey.inline.header 
                        small viewing question
                        // strong #{title}
                    // if can_edit
                    a.ui.icon.circular.button(href="/question/#{_id}/edit")
                        i.pencil.large.icon
                    .ui.header source: #{source}
                    +voting_full
                    +viewing
                    if in_dev 
                        +print_this
                    // +view_visibility
                    // +author_card
                .eight.wide.column
                    h1.ui.header #{title} 
                    a(href="https://www.google.com/search?q=#{instructions}" target='_window' title='search instructions')
                        i.search.icon
                    a(href="https://www.google.com/search?tbm=isch&q=#{instructions}" target='_window' title='image search instructions')
                        i.image.icon
                    a(href="https://www.amazon.com/s?k=#{title}&ref=nb_sb_noss_2" target='_window' title='amazon search instructions')
                        i.amazon.icon
                    +image_view key='image_id' label='image'
                    +html_view key='body' icon='content' label='body'
                    +array_view key='tags' label='tags' icon='tags'
                    .ui.two.column.grid 
                        .column
                            .ui.fluid.green.inverted.segment
                                .ui.header.huge yes
                        .column
                            .ui.fluid.red.inverted.segment
                                .ui.header.huge no
                        
                
                
template(name='question_edit')
    with current_doc
        .ui.stackable.padded.grid
            .row
                .four.wide.column
                    .ui.header 
                        small editing question
                        strong #{title}
                    a.ui.big.icon.green.button(href="/#{model}/#{_id}" title='save')
                        i.checkmark.big.icon
                    +remove_button
                    +image_edit key='image_id' label='image'
                    +array_edit key='tags' label='tags' icon='tags'
                .seven.wide.column.scrolling
                    +text_edit key='title'
                    +html_edit key='body' label='body' icon='content'